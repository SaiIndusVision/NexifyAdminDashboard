import{a as w,e as _,t as i,o as N,j as s,c as v,L as F,B as L,s as g}from"./index-BIpb7VEJ.js";import{u as y,a as I,F as P,b as x,c as h,d as p,e as b,f}from"./form-BL-c6AUK.js";import{u as $,a as C}from"./authApi-DGqUbGC4.js";import{I as S}from"./input-rNDUznzA.js";import{P as E}from"./password-input-M2rUMwvo.js";const A=()=>{const r=w(),t=_(e=>e.setCredentials),{mutate:l,isPending:c,error:a}=$({mutationFn:C.loginUser,onSuccess:e=>{t({role_name:e.role_name,user_id:e.user_id,first_name:e.first_name,last_name:e.last_name,email:e.email,user_created_date:e.user_created_date,access_token:e.access_token,refresh_token:e.refresh_token,secret_key_verified:e.secret_key_verified}),e.message==="Login successful"?e.role_name==="Admin"?(i.success("Login successful",{position:"top-center"}),r({to:"/users/"})):(r({to:"/sign-in"}),i.error("Invalid user role",{position:"top-center"})):i.error("Invalid user role",{position:"top-center"})},onError:e=>{console.log(e);const n=e?.response?.data?.message||"Login failed";i.error(n,{position:"top-center"})}});return{mutate:l,isLoading:c,error:a}},B=N({email:g().email({message:r=>r.input===""?"Email is required":"Invalid email address"}),password:g().min(1,"Password is required").min(7,"Password must be at least 7 characters long")});function G({className:r,isDarkMode:t=!1,...l}){const{mutate:c,isLoading:a}=A();w();const e=y({resolver:I(B),defaultValues:{email:"",password:""}});function n(o){c(o)}const m=()=>t?"bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-white/40 focus:ring-white/20":"bg-white/80 border-gray-200 text-gray-900 placeholder:text-gray-500 focus:border-blue-500 focus:ring-blue-500/20",u=()=>t?"text-white/90":"text-black",j=()=>t?"bg-primary hover:bg-white/30 text-white border border-white/30 backdrop-blur-sm":"bg-primary hover:bg-blue-700 text-white",d={email:t?"Enter your email address":"name@example.com",password:"Password"};return s.jsx("div",{className:`transition-all duration-300 ${t?"text-white":"text-gray-900"}`,children:s.jsx(P,{...e,children:s.jsxs("form",{onSubmit:e.handleSubmit(n),className:v("grid gap-4",r),...l,children:[s.jsx(x,{control:e.control,name:"email",render:({field:o})=>s.jsxs(h,{children:[s.jsx(p,{className:`${u()} transition-colors duration-300`,children:"Email *"}),s.jsx(b,{children:s.jsx(S,{placeholder:d.email,className:`${m()} transition-all duration-300`,...o})}),s.jsx(f,{className:t?"text-red-300":"text-red-500"})]})}),s.jsx(x,{control:e.control,name:"password",render:({field:o})=>s.jsxs(h,{children:[s.jsx(p,{className:`${u()} transition-colors duration-300`,children:"Password *"}),s.jsx(b,{children:s.jsx(E,{placeholder:d.password,className:`${m()} transition-all duration-300`,isDarkMode:t,...o})}),s.jsx(f,{className:t?"text-red-300":"text-red-500"})]})}),s.jsx("p",{className:`text-start text-sm transition-colors duration-300 ${t?"text-gray-300":"text-gray-500"} `,children:s.jsx(F,{to:"/forgot-password",className:`transition-colors duration-300 ${t?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-800"} `,children:"Forgot password?"})}),s.jsx(L,{className:`mt-4 transition-all duration-300 ${j()}`,disabled:a,children:a?"Logging in...":"Login"})]})})})}export{G as U};
