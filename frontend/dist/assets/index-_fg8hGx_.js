import{j as e,r as y,R as b,o as v,B as f,d as A,s as x,v as k}from"./index-BIpb7VEJ.js";import{A as V,a as q,b as K,u as z}from"./alert-D0l1lUrz.js";import{a as O}from"./axiosInstance-SHYzUQLh.js";import{H as U,T as H,P as $,M}from"./theme-switch-BM4-891m.js";import{L as B}from"./long-text-B72nMSP9.js";import{D as p,U as R}from"./workspace-table-YnT_YtZx.js";import{c as C}from"./createLucideIcon-BFWoEbaP.js";import{u as J,C as Q}from"./confirm-dialog-CJxajWTN.js";import{u as D,a as _,F as S,b as l,c as i,d as c,e as m,f as d,L as X}from"./form-BL-c6AUK.js";import{s as g}from"./show-submitted-data-orVsdGJT.js";import{D as P,a as T,b as F,c as I,d as W,e as E,f as G}from"./dialog-BB3aeqbb.js";import{I as u}from"./input-rNDUznzA.js";import{P as N}from"./password-input-M2rUMwvo.js";import{I as Y,a as Z}from"./IconMailPlus-BDMz9cXb.js";import{T as ee}from"./textarea-Dp9AB515.js";import{I as se}from"./IconSend-B_OWqEoY.js";import"./sidebar-hxPOteIt.js";import"./index-DdYp0NZ-.js";import"./index-BPgIyX4J.js";import"./index-XUdhzyfV.js";import"./index-DhVeR81R.js";import"./index-CGqW8isM.js";import"./index-vvVGFqZL.js";import"./dropdown-menu-CPcBh0xs.js";import"./index-HAQUmL7d.js";import"./index-gCXyVcA9.js";import"./chevron-right-BFa11Oe8.js";import"./check-Dy8uVGp8.js";import"./popover-DEtD5obw.js";import"./react-icons.esm-D3ovVlUy.js";import"./table-BuU_D776.js";import"./select-pvPekMj3.js";import"./index-BdQq_4o_.js";import"./index-5gSC79ij.js";import"./chevron-down-SDtBDa1w.js";import"./createReactComponent-q0sjk0bg.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],re=C("circle-check-big",ae);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ne=C("circle-x",te),oe=[{accessorKey:"name",header:({column:s})=>e.jsx(p,{column:s,title:"Name"}),cell:({row:s})=>e.jsx(B,{className:"text-foreground max-w-36",children:s.getValue("name")}),meta:{className:"w-full p-3"},enableHiding:!1},{accessorKey:"created_by_name",header:({column:s})=>e.jsx(p,{column:s,title:"Created by"}),cell:({row:s})=>e.jsx("div",{className:"text-foreground w-fit text-nowrap",children:s.getValue("created_by_name")})},{accessorKey:"status",header:({column:s})=>e.jsx(p,{column:s,title:"Status"}),cell:({row:s})=>e.jsx("div",{className:"flex space-x-2",children:s.original?.is_activated?e.jsxs("span",{className:"ml-2 flex items-center justify-center gap-2 rounded-full",children:[e.jsx(re,{color:"#38d818"})," Active"]}):e.jsxs("span",{className:"ml-2 flex items-center justify-center gap-2 rounded-full",children:[e.jsx(ne,{color:"#EA4E4E"}),e.jsx("span",{children:"Inactive"})]})}),meta:{className:"w-full"},filterFn:(s,a,r)=>r.includes(s.getValue(a)),enableHiding:!1,enableSorting:!1},{accessorKey:"field_assistant_name",header:({column:s})=>e.jsx(p,{column:s,title:"Field assistant name"}),cell:({row:s})=>e.jsx("div",{className:"text-foreground",children:s.getValue("field_assistant_name")}),enableSorting:!1},{accessorKey:"field_assistant_phone_number",header:({column:s})=>e.jsx(p,{column:s,title:"field_assistant_phone_number"}),cell:({row:s})=>e.jsx("div",{className:"text-foreground",children:s.getValue("field_assistant_phone_number")}),enableSorting:!1},{accessorKey:"sku_count",header:({column:s})=>e.jsx(p,{column:s,title:"Sku count"}),cell:({row:s})=>e.jsx("div",{className:"text-foreground",children:s.getValue("sku_count")}),enableSorting:!1},{accessorKey:"created_at",header:({column:s})=>e.jsx(p,{column:s,title:"Onboarding Date & Time"}),cell:({row:s})=>{const a=new Date(s.getValue("created_at")),r=a.toLocaleDateString(),n=a.toLocaleTimeString();return e.jsx("div",{className:"text-foreground",children:`${r} ( ${n} )`})}}],L=b.createContext(null);function le({children:s}){const[a,r]=J(null),[n,t]=y.useState(null);return e.jsx(L,{value:{open:a,setOpen:r,currentRow:n,setCurrentRow:t},children:s})}const ie=()=>{const s=b.useContext(L);if(!s)throw new Error("useWorkspace has to be used within <WorkspaceContext>");return s},ce=v({firstName:x().min(1,"First Name is required."),lastName:x().min(1,"Last Name is required."),workspacename:x().min(1,"workspacename is required."),phoneNumber:x().min(1,"Phone number is required."),email:k({error:s=>s.input===""?"Email is required.":void 0}),password:x().transform(s=>s.trim()),confirmPassword:x().transform(s=>s.trim()),isEdit:A()}).refine(s=>s.isEdit&&!s.password?!0:s.password.length>0,{message:"Password is required.",path:["password"]}).refine(({isEdit:s,password:a})=>s&&!a?!0:a.length>=8,{message:"Password must be at least 8 characters long.",path:["password"]}).refine(({isEdit:s,password:a})=>s&&!a?!0:/[a-z]/.test(a),{message:"Password must contain at least one lowercase letter.",path:["password"]}).refine(({isEdit:s,password:a})=>s&&!a?!0:/\d/.test(a),{message:"Password must contain at least one number.",path:["password"]}).refine(({isEdit:s,password:a,confirmPassword:r})=>s&&!a?!0:a===r,{message:"Passwords don't match.",path:["confirmPassword"]});function w({currentRow:s,open:a,onOpenChange:r}){const n=!!s,t=D({resolver:_(ce),defaultValues:n?{...s,password:"",confirmPassword:"",isEdit:n}:{firstName:"",lastName:"",workspacename:"",email:"",phoneNumber:"",password:"",confirmPassword:"",isEdit:n}}),h=o=>{t.reset(),g(o),r(!1)},j=!!t.formState.dirtyFields.password;return e.jsx(P,{open:a,onOpenChange:o=>{t.reset(),r(o)},children:e.jsxs(T,{className:"sm:max-w-lg",children:[e.jsxs(F,{className:"text-left",children:[e.jsx(I,{children:n?"Edit workspace":"Add New Workspace"}),e.jsxs(W,{children:[n?"Update the workspace here. ":"Create new workspace here. ","Click save when you're done."]})]}),e.jsx("div",{className:"-mr-4 h-[26.25rem] w-full overflow-y-auto py-1 pr-4",children:e.jsx(S,{...t,children:e.jsxs("form",{id:"workspace-form",onSubmit:t.handleSubmit(h),className:"space-y-4 p-0.5",children:[e.jsx(l,{control:t.control,name:"firstName",render:({field:o})=>e.jsxs(i,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(c,{className:"col-span-2 text-right",children:"First Name"}),e.jsx(m,{children:e.jsx(u,{placeholder:"John",className:"col-span-4",autoComplete:"off",...o})}),e.jsx(d,{className:"col-span-4 col-start-3"})]})}),e.jsx(l,{control:t.control,name:"lastName",render:({field:o})=>e.jsxs(i,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(c,{className:"col-span-2 text-right",children:"Last Name"}),e.jsx(m,{children:e.jsx(u,{placeholder:"Doe",className:"col-span-4",autoComplete:"off",...o})}),e.jsx(d,{className:"col-span-4 col-start-3"})]})}),e.jsx(l,{control:t.control,name:"workspacename",render:({field:o})=>e.jsxs(i,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(c,{className:"col-span-2 text-right",children:"workspacename"}),e.jsx(m,{children:e.jsx(u,{placeholder:"john_doe",className:"col-span-4",...o})}),e.jsx(d,{className:"col-span-4 col-start-3"})]})}),e.jsx(l,{control:t.control,name:"email",render:({field:o})=>e.jsxs(i,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(c,{className:"col-span-2 text-right",children:"Email"}),e.jsx(m,{children:e.jsx(u,{placeholder:"john.doe@gmail.com",className:"col-span-4",...o})}),e.jsx(d,{className:"col-span-4 col-start-3"})]})}),e.jsx(l,{control:t.control,name:"phoneNumber",render:({field:o})=>e.jsxs(i,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(c,{className:"col-span-2 text-right",children:"Phone Number"}),e.jsx(m,{children:e.jsx(u,{placeholder:"+123456789",className:"col-span-4",...o})}),e.jsx(d,{className:"col-span-4 col-start-3"})]})}),e.jsx(l,{control:t.control,name:"password",render:({field:o})=>e.jsxs(i,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(c,{className:"col-span-2 text-right",children:"Password"}),e.jsx(m,{children:e.jsx(N,{placeholder:"e.g., S3cur3P@ssw0rd",className:"col-span-4",...o})}),e.jsx(d,{className:"col-span-4 col-start-3"})]})}),e.jsx(l,{control:t.control,name:"confirmPassword",render:({field:o})=>e.jsxs(i,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(c,{className:"col-span-2 text-right",children:"Confirm Password"}),e.jsx(m,{children:e.jsx(N,{disabled:!j,placeholder:"e.g., S3cur3P@ssw0rd",className:"col-span-4",...o})}),e.jsx(d,{className:"col-span-4 col-start-3"})]})})]})})}),e.jsx(E,{children:e.jsx(f,{type:"submit",form:"workspace-form",children:"Save changes"})})]})})}function me({open:s,onOpenChange:a,currentRow:r}){const[n,t]=y.useState(""),h=()=>{n.trim()===r.username&&(a(!1),g(r,"The following user has been deleted:"))};return e.jsx(Q,{open:s,onOpenChange:a,handleConfirm:h,disabled:n.trim()!==r.username,title:e.jsxs("span",{className:"text-destructive",children:[e.jsx(Y,{className:"stroke-destructive mr-1 inline-block",size:18})," ","Delete User"]}),desc:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"mb-2",children:["Are you sure you want to delete"," ",e.jsx("span",{className:"font-bold",children:r.username}),"?",e.jsx("br",{}),"This action will permanently remove the user with the role of"," ",e.jsx("span",{className:"font-bold",children:r.role.toUpperCase()})," ","from the system. This cannot be undone."]}),e.jsxs(X,{className:"my-2",children:["Username:",e.jsx(u,{value:n,onChange:j=>t(j.target.value),placeholder:"Enter username to confirm deletion."})]}),e.jsxs(V,{variant:"destructive",children:[e.jsx(q,{children:"Warning!"}),e.jsx(K,{children:"Please be carefull, this operation can not be rolled back."})]})]}),confirmText:"Delete",destructive:!0})}const de=v({email:k({error:s=>s.input===""?"Please enter an email to invite.":void 0}),desc:x().optional()});function pe({open:s,onOpenChange:a}){const r=D({resolver:_(de),defaultValues:{email:"",desc:""}}),n=t=>{r.reset(),g(t),a(!1)};return e.jsx(P,{open:s,onOpenChange:t=>{r.reset(),a(t)},children:e.jsxs(T,{className:"sm:max-w-md",children:[e.jsxs(F,{className:"text-left",children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Z,{})," Invite User"]}),e.jsx(W,{children:"Invite new user to join your team by sending them an email invitation. Assign a role to define their access level."})]}),e.jsx(S,{...r,children:e.jsxs("form",{id:"user-invite-form",onSubmit:r.handleSubmit(n),className:"space-y-4",children:[e.jsx(l,{control:r.control,name:"email",render:({field:t})=>e.jsxs(i,{children:[e.jsx(c,{children:"Email"}),e.jsx(m,{children:e.jsx(u,{type:"email",placeholder:"eg: john.doe@gmail.com",...t})}),e.jsx(d,{})]})}),e.jsx(l,{control:r.control,name:"desc",render:({field:t})=>e.jsxs(i,{className:"",children:[e.jsx(c,{children:"Description (optional)"}),e.jsx(m,{children:e.jsx(ee,{className:"resize-none",placeholder:"Add a personal note to your invitation (optional)",...t})}),e.jsx(d,{})]})})]})}),e.jsxs(E,{className:"gap-y-2",children:[e.jsx(G,{asChild:!0,children:e.jsx(f,{variant:"outline",children:"Cancel"})}),e.jsxs(f,{type:"submit",form:"user-invite-form",children:["Invite ",e.jsx(se,{})]})]})]})})}function xe(){const{open:s,setOpen:a,currentRow:r,setCurrentRow:n}=ie();return e.jsxs(e.Fragment,{children:[e.jsx(w,{open:s==="add",onOpenChange:()=>a("add")},"user-add"),e.jsx(pe,{open:s==="invite",onOpenChange:()=>a("invite")},"user-invite"),r&&e.jsxs(e.Fragment,{children:[e.jsx(w,{open:s==="edit",onOpenChange:()=>{a("edit"),setTimeout(()=>{n(null)},500)},currentRow:r},`user-edit-${r.id}`),e.jsx(me,{open:s==="delete",onOpenChange:()=>{a("delete"),setTimeout(()=>{n(null)},500)},currentRow:r},`user-delete-${r.id}`)]})]})}const ue=async()=>(await O.get("/workspace/?role=1&page=1&page_size=200")).data.results;function he(){const{data:s,isLoading:a}=z({queryKey:["Workspace"],queryFn:ue});return a?e.jsx("div",{children:"Loading..."}):e.jsxs(le,{children:[e.jsx(U,{fixed:!0,children:e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(H,{}),e.jsx($,{})]})}),e.jsxs(M,{children:[e.jsx("div",{className:"mb-2 flex flex-wrap items-center justify-between space-y-2",children:e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Workspace List"})})}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto rounded-md bg-white/50 p-2 lg:flex-row lg:space-y-0 lg:space-x-12 dark:bg-white/20",children:e.jsx(R,{data:s||[],columns:oe})})]}),e.jsx(xe,{})]})}const Ye=he;export{Ye as component};
