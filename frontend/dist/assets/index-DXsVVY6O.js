import{j as e,c as g,B as c,t as p,L as D,r as x}from"./index-BIpb7VEJ.js";import{u as V}from"./alert-D0l1lUrz.js";import{a as z}from"./axiosInstance-SHYzUQLh.js";import{H as A,T as E,P as B,M as U}from"./theme-switch-BM4-891m.js";import{L as H}from"./long-text-B72nMSP9.js";import{A as N,a as C,C as L,E as $,D as q,b as G,c as K,d as O,P as Q,e as W,f as J}from"./react-icons.esm-D3ovVlUy.js";import{D as X,a as Y,b as Z,e as j,d as ee}from"./dropdown-menu-CPcBh0xs.js";import{C as v,S as se}from"./square-arrow-out-up-right-CWvy8fVU.js";import{u as ae,U as te,a as re}from"./users-dialogs-DjeFqa1X.js";import{I as ne}from"./IconPlus-Bn2-_B8k.js";import{u as le,g as oe,h as ie,i as ce,j as de,k as me,T as xe,a as ue,b as f,c as ge,f as b,d as he,e as S}from"./table-BuU_D776.js";import{S as pe,a as je,b as fe,c as we,d as Ne}from"./select-pvPekMj3.js";import{I as Ce}from"./input-rNDUznzA.js";import{B as w}from"./badge-I07TdIjA.js";import{C as ve,a as be,b as Se,c as ye,d as y,e as P,f as Pe}from"./command-CQ5ofn2X.js";import{P as Ie,a as Fe,b as _e}from"./popover-DEtD5obw.js";import{S as Re}from"./separator-1tVroHgK.js";import"./sidebar-hxPOteIt.js";import"./dialog-BB3aeqbb.js";import"./index-DdYp0NZ-.js";import"./index-DhVeR81R.js";import"./index-BPgIyX4J.js";import"./index-XUdhzyfV.js";import"./index-CGqW8isM.js";import"./createLucideIcon-BFWoEbaP.js";import"./index-vvVGFqZL.js";import"./index-HAQUmL7d.js";import"./index-gCXyVcA9.js";import"./chevron-right-BFa11Oe8.js";import"./check-Dy8uVGp8.js";import"./confirm-dialog-CJxajWTN.js";import"./form-BL-c6AUK.js";import"./phoneinput-BV71Ua43.js";import"./show-submitted-data-orVsdGJT.js";import"./IconMailPlus-BDMz9cXb.js";import"./createReactComponent-q0sjk0bg.js";import"./textarea-Dp9AB515.js";import"./IconSend-B_OWqEoY.js";import"./index-BdQq_4o_.js";import"./index-5gSC79ij.js";import"./chevron-down-SDtBDa1w.js";function m({column:s,title:a,className:t}){return s.getCanSort()?e.jsx("div",{className:g("flex items-center space-x-2",t),children:e.jsxs(X,{children:[e.jsx(Y,{asChild:!0,children:e.jsxs(c,{variant:"ghost",size:"sm",className:"data-[state=open]:bg-accent -ml-3 h-8",children:[e.jsx("span",{children:a}),s.getIsSorted()==="desc"?e.jsx(N,{className:"ml-2 h-4 w-4"}):s.getIsSorted()==="asc"?e.jsx(C,{className:"ml-2 h-4 w-4"}):e.jsx(L,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(Z,{align:"start",children:[e.jsxs(j,{onClick:()=>s.toggleSorting(!1),children:[e.jsx(C,{className:"text-muted-foreground/70 mr-2 h-3.5 w-3.5"}),"Asc"]}),e.jsxs(j,{onClick:()=>s.toggleSorting(!0),children:[e.jsx(N,{className:"text-muted-foreground/70 mr-2 h-3.5 w-3.5"}),"Desc"]}),s.getCanHide()&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsxs(j,{onClick:()=>s.toggleVisibility(!1),children:[e.jsx($,{className:"text-muted-foreground/70 mr-2 h-3.5 w-3.5"}),"Hide"]})]})]})]})}):e.jsx("div",{className:g(t),children:a})}const ke=[{accessorKey:"status",header:({column:s})=>e.jsx(m,{column:s,title:""}),cell:({row:s})=>e.jsx("div",{className:"flex space-x-2",children:e.jsx("span",{className:`ml-2 rounded-full p-1 text-xs ${s.original?.is_authorized?"bg-[#20B974]":"bg-[#EA4E4E]"}`})}),meta:{className:"w-12"},filterFn:(s,a,t)=>t.includes(s.getValue(a)),enableHiding:!1,enableSorting:!1},{id:"full_name",header:({column:s})=>e.jsx(m,{column:s,title:"Name"}),cell:({row:s})=>{const{first_name:a,last_name:t}=s.original;return e.jsxs("span",{className:"text-foreground",children:[a," ",t]})}},{id:"email",header:({column:s})=>e.jsx(m,{column:s,title:"Email"}),cell:({row:s})=>e.jsxs("div",{className:"flex justify-between gap-2 pr-8",children:[e.jsx("span",{className:"text-foreground",children:s.original.email}),e.jsx(v,{color:"#ABB4C6",className:"h-4 w-4 cursor-pointer",onClick:()=>{navigator.clipboard.writeText(s.original.email),p.success("Email copied to clipboard",{duration:1500,position:"bottom-right"})}})]}),meta:{className:"w-full"}},{id:"country_code",header:({column:s})=>e.jsx(m,{column:s,title:"Country Code"}),cell:({row:s})=>e.jsx("span",{className:"text-foreground",children:s.original.country_code}),meta:{className:"w-48"}},{id:"phone_number",header:({column:s})=>e.jsx(m,{column:s,title:"Phone Number"}),cell:({row:s})=>{const a=s.original.country_code||"",t=s.original.phone_number||"",o=t.startsWith(a)?t.slice(a.length):t,r=`${a}${o}`;return e.jsxs("div",{className:"item-start flex justify-between gap-2 pr-16",children:[e.jsx("span",{className:"text-foreground",children:o}),e.jsx(v,{color:"#ABB4C6",className:"h-4 w-4 cursor-pointer",onClick:()=>{navigator.clipboard.writeText(r),p.success("Phone number copied to clipboard",{duration:1500,position:"bottom-right"})}})]})},meta:{className:"w-full"},enableSorting:!1},{id:"View",header:"View",cell:({row:s})=>{const a=s.original;return e.jsx(c,{asChild:!0,variant:"ghost",size:"sm",className:"text-foreground",children:e.jsx(D,{to:"/users/$userId",params:{userId:a.id.toString()},onClick:()=>{p.success("Navigated to user details",{duration:1500,position:"bottom-right"})},children:e.jsx(se,{color:"#ABB4C6",className:"mr-2 h-4 w-4"})})})}}];g("drop-shadow-[0_1px_2px_rgb(0_0_0_/_0.1)] dark:drop-shadow-[0_1px_2px_rgb(255_255_255_/_0.1)] lg:drop-shadow-none","bg-background group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted","sticky left-6 md:table-cell");function Me(){const{setOpen:s}=ae();return e.jsx("div",{className:"flex gap-2",children:e.jsxs(c,{className:"space-x-1",onClick:()=>s("add"),children:[e.jsx("span",{children:"Add New Engineer"})," ",e.jsx(ne,{size:18})]})})}function Te({table:s}){return e.jsxs("div",{className:"flex items-center justify-between px-2",style:{overflowClipMargin:1},children:[e.jsxs("div",{className:"text-muted-foreground hidden flex-1 text-sm sm:block",children:[s.getFilteredSelectedRowModel().rows.length," of"," ",s.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"text-foreground flex items-center sm:space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"hidden text-sm font-medium sm:block",children:"Rows per page"}),e.jsxs(pe,{value:`${s.getState().pagination.pageSize}`,onValueChange:a=>{s.setPageSize(Number(a))},children:[e.jsx(je,{className:"h-8 w-[70px]",children:e.jsx(fe,{placeholder:s.getState().pagination.pageSize})}),e.jsx(we,{side:"top",children:[10,20,30,40,50].map(a=>e.jsx(Ne,{value:`${a}`,children:a},a))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",s.getState().pagination.pageIndex+1," of"," ",s.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(c,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(0),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(q,{className:"h-4 w-4"})]}),e.jsxs(c,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.previousPage(),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(G,{className:"h-4 w-4"})]}),e.jsxs(c,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.nextPage(),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(K,{className:"h-4 w-4"})]}),e.jsxs(c,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(s.getPageCount()-1),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(O,{className:"h-4 w-4"})]})]})]})]})}function De({column:s,title:a,options:t}){const o=s?.getFacetedUniqueValues(),r=new Set(s?.getFilterValue());return e.jsxs(Ie,{children:[e.jsx(Fe,{asChild:!0,children:e.jsxs(c,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[e.jsx(Q,{className:"h-4 w-4"}),a,r?.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(Re,{orientation:"vertical",className:"mx-2 h-4"}),e.jsx(w,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:r.size}),e.jsx("div",{className:"hidden space-x-1 lg:flex",children:r.size>2?e.jsxs(w,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[r.size," selected"]}):t.filter(n=>r.has(n.value)).map(n=>e.jsx(w,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:n.label},n.value))})]})]})}),e.jsx(_e,{className:"w-[200px] p-0",align:"start",children:e.jsxs(ve,{children:[e.jsx(be,{placeholder:a}),e.jsxs(Se,{children:[e.jsx(ye,{children:"No results found."}),e.jsx(y,{children:t.map(n=>{const d=r.has(n.value);return e.jsxs(P,{onSelect:()=>{d?r.delete(n.value):r.add(n.value);const h=Array.from(r);s?.setFilterValue(h.length?h:void 0)},children:[e.jsx("div",{className:g("border-primary flex h-4 w-4 items-center justify-center rounded-sm border",d?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(W,{className:g("h-4 w-4")})}),n.icon&&e.jsx(n.icon,{className:"text-muted-foreground h-4 w-4"}),e.jsx("span",{children:n.label}),o?.get(n.value)&&e.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:o.get(n.value)})]},n.value)})}),r.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(Pe,{}),e.jsx(y,{children:e.jsx(P,{onSelect:()=>s?.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}function Ve({table:s}){const a=s.getState().columnFilters.length>0;return e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex flex-1 flex-col-reverse items-start gap-y-2 sm:flex-row sm:items-center sm:space-x-2",children:[e.jsx(Ce,{placeholder:"Filter users...",value:s.getColumn("email")?.getFilterValue()??"",onChange:t=>s.getColumn("email")?.setFilterValue(t.target.value),className:"h-8 w-[150px] lg:w-[250px]"}),e.jsx("div",{className:"flex gap-x-2",children:s.getColumn("status")&&e.jsx(De,{column:s.getColumn("status"),title:"Status",options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}]})}),a&&e.jsxs(c,{variant:"ghost",onClick:()=>s.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",e.jsx(J,{className:"ml-2 h-4 w-4"})]})]})})}function ze({columns:s,data:a,pageCount:t,pageIndex:o,pageSize:r,onPageChange:n,onPageSizeChange:d}){const[h,I]=x.useState({}),[F,_]=x.useState({}),[R,k]=x.useState([]),[M,T]=x.useState([]),u=le({data:a,columns:s,pageCount:t,state:{sorting:M,columnVisibility:F,rowSelection:h,columnFilters:R,pagination:{pageIndex:o,pageSize:r}},enableRowSelection:!0,onRowSelectionChange:I,onSortingChange:T,onColumnFiltersChange:k,onColumnVisibilityChange:_,onPaginationChange:i=>{const l=typeof i=="function"?i({pageIndex:o,pageSize:r}):i;n(l.pageIndex),d(l.pageSize)},getCoreRowModel:me(),getFilteredRowModel:de(),getSortedRowModel:ce(),getFacetedRowModel:ie(),getFacetedUniqueValues:oe(),manualPagination:!0});return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ve,{table:u}),e.jsx("div",{className:"max-h-[calc(60vh)] min-h-24 overflow-y-scroll rounded-md border",children:e.jsxs(xe,{children:[e.jsx(ue,{children:u.getHeaderGroups().map(i=>e.jsx(f,{className:"group/row",children:i.headers.map(l=>e.jsx(ge,{colSpan:l.colSpan,className:l.column.columnDef.meta?.className??"",children:l.isPlaceholder?null:b(l.column.columnDef.header,l.getContext())},l.id))},i.id))}),e.jsx(he,{children:u.getRowModel().rows?.length?u.getRowModel().rows.map(i=>e.jsx(f,{"data-state":i.getIsSelected()&&"selected",className:"group/row",children:i.getVisibleCells().map(l=>e.jsx(S,{className:l.column.columnDef.meta?.className??"",children:b(l.column.columnDef.cell,l.getContext())},l.id))},i.id)):e.jsx(f,{children:e.jsx(S,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(Te,{table:u})]})}const Ae=async(s=1,a=10)=>{const t=await z.get(`/user/?role=3&page=${s}&page_size=${a}`);return{results:t.data.results,count:t.data.total_count}};function Ee(){const[s,a]=x.useState(1),[t,o]=x.useState(10),{data:r,isLoading:n}=V({queryKey:["engineers",s,t],queryFn:()=>Ae(s,t),refetchOnMount:!0});return n?e.jsx("div",{children:"Loading..."}):e.jsxs(te,{children:[e.jsx(A,{fixed:!0,children:e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(E,{}),e.jsx(B,{})]})}),e.jsxs(U,{children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between space-y-2",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-foreground text-2xl font-bold tracking-tight",children:"Engineers List"})}),e.jsx(Me,{})]}),e.jsx("div",{className:"-mx-4 max-h-150 flex-1 overflow-scroll rounded-md bg-white/50 p-2 lg:flex-row lg:space-y-0 lg:space-x-12 dark:bg-white/20",children:e.jsx(ze,{data:r?.results||[],columns:ke,pageCount:Math.ceil(r?.count/t),pageIndex:s-1,pageSize:t,onPageChange:d=>a(d+1),onPageSizeChange:o})})]}),e.jsx(re,{})]})}const Ps=Ee;export{Ps as component};
